#########################################################################
#    DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN  #
#                                                                       #
#                   File generated by openITCOCKPIT                     #
#                                                                       #
#                        Created: 01.11.2018 16:43                      #
#########################################################################

version: '3'
services:
  carbon-cache01:
    image: openitcockpit/carbon-cache:latest
    hostname: carbon-cache01
    volumes:
    - /var/lib/graphite/whisper:/var/lib/graphite/whisper
    - /etc/openitcockpit/carbon:/etc/carbon
    command: ["/opt/graphite/bin/carbon-cache.py", "--config=/etc/carbon/carbon.conf", "--nodaemon", "start", "--instance", "01"]
  carbon-cache02:
    image: openitcockpit/carbon-cache:latest
    hostname: carbon-cache02
    volumes:
    - /var/lib/graphite/whisper:/var/lib/graphite/whisper
    - /etc/openitcockpit/carbon:/etc/carbon
    command: ["/opt/graphite/bin/carbon-cache.py", "--config=/etc/carbon/carbon.conf", "--nodaemon", "start", "--instance", "02"]
  graphite-web:
    image: openitcockpit/graphite-web:latest
    volumes:
    - /var/lib/graphite/whisper:/var/lib/graphite/whisper
    - /etc/openitcockpit/carbon:/etc/carbon
  carbon-c-relay:
    image: openitcockpit/carbon-c-relay:latest
    ports:
    - "127.0.0.1:2003:2003"
    volumes:
    - /etc/openitcockpit/carbon:/etc/carbon
    command: ["/opt/carbon-c-relay/bin/relay", "-f", "/etc/carbon/carbon-c-relay.conf", "-w 4", "-p", "2003"]
  grafana:
    image: grafana/grafana
    environment:
    - GF_SECURITY_ADMIN_PASSWORD__FILE=/etc/openitcockpit/grafana/admin_password
    - GF_PATHS_CONFIG=/etc/openitcockpit/grafana/grafana.ini
    - GF_PATHS_DATA=/var/lib/grafana
    - GF_PATHS_HOME=/usr/share/grafana
    - GF_PATHS_LOGS=/var/log/grafana
    - GF_PATHS_PLUGINS=/var/lib/grafana/plugins
    - GF_PATHS_PROVISIONING=/etc/grafana/provisioning
    ports:
    - "127.0.0.1:3033:3033"
    volumes:
    - grafana-data:/var/lib/grafana
    - /etc/openitcockpit/grafana:/etc/openitcockpit/grafana
volumes:
  grafana-data: